//
//  shared-toolbar.tsx
//  core-cloud-web
//
//  Created by Fang Ling on 2025/7/25.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//

'use client'

import useSharedToolbar from '@/view-models/shared-toolbar'
import Icon from './shared/toolbar/icon'
import Button from './shared/toolbar/button'
import UIImage from './ui-image'
import NoticePopover from './shared/toolbar/notice-popover'
import Popover from './shared/toolbar/popover'
import Link from 'next/link'
import MenuItem from './shared/toolbar/menu-item'
import Localizer from '@/localizer'

export default function SharedToolbar({
  source,
  firstName,
  lastName,
  username,
  urls,
  apps,
  onCustomize
}: {
  /*
   * When source is not 'app', we also need the overlay style class.
   */
  source: 'authenticator' | 'home' | 'app',
  firstName?: string,
  lastName?: string,
  username?: string,
  urls?: string[],
  apps?: {
    urls: string[],
    name: string,
    href: string
  }[],
  onCustomize?: () => void
}) {
  const viewModel = useSharedToolbar({
    onCustomize: onCustomize
  })

  return (
    <>
      <header
        className={
          'top-0 height-11 min-h-11 pl-4 pr-1.5 flex sticky items-center ' +
            'select-none ' + (
              source === 'authenticator'
                ? (
                  'before:absolute before:backdrop-blur-[10px] z-3 ' +
                    'before:-z-1 border-b border-b-[rgba(251,251,253,.5)] ' +
                    'bg-[rgba(251,251,253,.5)] before:inset-0 ' +
                    'dark:border-b-[rgba(28,28,30,0.5)] ' +
                    'dark:bg-[rgba(28,28,30,0.5)]'
                )
                : source === 'home'
                  ? (
                    'dark:bg-[rgba(56,56,61,.6)] bg-[rgba(248,248,252,.4)] ' +
                      'z-3 backdrop-blur-[14px]'
                  )
                  : ''
            )
        }
      >
        {
          (() => {
            switch (source) {
              case 'authenticator': return (
                <Icon
                  urls={
                    process.env.NEXT_PUBLIC_AUTHENTICATOR_ICON_URLS?.split(',')
                  }
                />
              )
              case 'home': return (
                <Icon
                  urls={process.env.NEXT_PUBLIC_HOME_ICON_URLS?.split(',')}
                />
              )
            }
          })()
        }
        <div className="font-semibold text-[21px] text-systemBlack">
          <div
            dangerouslySetInnerHTML={{
              __html: process.env.NEXT_PUBLIC_TITLE ?? ''
            }}
          />
        </div>

        {
          source !== 'authenticator' && (
            <div className="ml-auto flex items-center">
              <Button
                onClick={(event) => {
                  viewModel.handleModalOpen(event, 1)
                }}
                isOpen={viewModel.radioMode === 1}
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="17"
                  height="19"
                  aria-hidden="true"
                  className="fill-current"
                >
                  <path
                    d={
                      'M3.323 1.282h10.364C13.616.445 13.126 0 12.25 ' +
                        '0H4.76c-.885 0-1.375.445-1.437 1.282ZM1.646 ' +
                        '3.825h13.708c-.125-.88-.573-1.388-1.562-1.388H' +
                        '3.219c-' +
                        '.99 0-1.438.509-1.573 1.388ZM2.74 19h11.52c1.782 0 ' +
                        '2.74-.964 2.74-2.766V7.916c0-1.791-.958-2.755-2.74-' +
                        '2.755H2.74C.948 5.16 0 6.125 0 7.916v8.318C0 ' +
                        '18.036.948 19 2.74 19Zm2.718-3.582v-3.306c0-.572.22-' +
                        '.88.657-.943v-.9c0-1.633.968-2.735 2.385-2.735 ' +
                        '1.417 0 2.385 1.102 2.385 2.734v.901c.438.064.657.' +
                        '37.657.943v3.306c0 ' +
                        '.668-.292.975-.896.975H6.354c-.604 ' +
                        '0-.896-.307-.896-.975Zm1.823-4.28h2.427v-.965c0-.89-' +
                        '.479-1.484-1.208-1.484-.74 0-1.219.594-1.219 ' +
                        '1.484v.964Z'
                    }
                  />
                </svg>
              </Button>
              <Button
                onClick={(event) => {
                  viewModel.handleModalOpen(event, 2)
                }}
                isOpen={viewModel.radioMode === 2}
              >
                <svg
                  className="fill-current"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 64 64"
                  height="22"
                  width="22"
                  aria-hidden="true"
                >
                  <path
                    d={
                      'M2.54982858,9.5141143 L7.18154287,9.5141143 ' +
                        'C8.96725716,9.5141143 9.60897144,8.87234287 ' +
                        '9.60897144,7.11457144 L9.60897144,2.48285715 ' +
                        'C9.60897144,0.697142858 8.96725716,0.0554285715 ' +
                        '7.18154287,0.0554285715 L2.54982858,0.0554285715 ' +
                        'C0.792000001,0.0554285715 0.150285715,0.697142858 ' +
                        '0.150285715,2.48285715 L0.150285715,7.11457144 ' +
                        'C0.150285715,8.87234287 0.792000001,9.5141143 ' +
                        '2.54982858,9.5141143 Z M19.2350857,9.5141143 ' +
                        'L23.8668,9.5141143 C25.6245715,9.5141143 ' +
                        '26.2663429,8.87234287 26.2663429,7.11457144 ' +
                        'L26.2663429,2.48285715 C26.2663429,0.697142858 ' +
                        '25.6245715,0.0554285715 23.8668,0.0554285715 ' +
                        'L19.2350857,0.0554285715 C17.4493715,0.0554285715 ' +
                        '16.8076572,0.697142858 16.8076572,2.48285715 ' +
                        'L16.8076572,7.11457144 C16.8076572,8.87234287 ' +
                        '17.4493715,9.5141143 19.2350857,9.5141143 Z ' +
                        'M35.8924572,9.5141143 L40.5241715,9.5141143 ' +
                        'C42.2819429,9.5141143 42.9237144,8.87234287 ' +
                        '42.9237144,7.11457144 L42.9237144,2.48285715 ' +
                        'C42.9237144,0.697142858 42.2819429,0.0554285715 ' +
                        '40.5241715,0.0554285715 L35.8924572,0.0554285715 ' +
                        'C34.1346286,0.0554285715 33.4929143,0.697142858 ' +
                        '33.4929143,2.48285715 L33.4929143,7.11457144 ' +
                        'C33.4929143,8.87234287 34.1346286,9.5141143 ' +
                        '35.8924572,9.5141143 Z M52.5496001,9.5141143 ' +
                        'L57.1816001,9.5141143 C58.9673144,9.5141143 ' +
                        '59.6090287,8.87234287 59.6090287,7.11457144 ' +
                        'L59.6090287,2.48285715 C59.6090287,0.697142858 ' +
                        '58.9673144,0.0554285715 57.1816001,0.0554285715 ' +
                        'L52.5496001,0.0554285715 C50.7918858,0.0554285715 ' +
                        '50.1502858,0.697142858 50.1502858,2.48285715 ' +
                        'L50.1502858,7.11457144 C50.1502858,8.87234287 ' +
                        '50.7918858,9.5141143 52.5496001,9.5141143 Z ' +
                        'M2.68931429,26.1714858 L7.32102858,26.1714858 ' +
                        'C9.10674287,26.1714858 9.74845716,25.5297143 ' +
                        '9.74845716,23.7719429 L9.74845716,19.1402286 ' +
                        'C9.74845716,17.3824 9.10674287,16.7406857 ' +
                        '7.32102858,16.7406857 L2.68931429,16.7406857 ' +
                        'C0.931542859,16.7406857 0.289771429,17.3824 ' +
                        '0.289771429,19.1402286 L0.289771429,23.7719429 ' +
                        'C0.289771429,25.5297143 0.931542859,26.1714858 ' +
                        '2.68931429,26.1714858 Z M19.3746286,26.1714858 ' +
                        'L24.0062858,26.1714858 C25.7641143,26.1714858 ' +
                        '26.4058286,25.5297143 26.4058286,23.7719429 ' +
                        'L26.4058286,19.1402286 C26.4058286,17.3824 ' +
                        '25.7641143,16.7406857 24.0062858,16.7406857 ' +
                        'L19.3746286,16.7406857 C17.5889143,16.7406857 ' +
                        '16.9471429,17.3824 16.9471429,19.1402286 ' +
                        'L16.9471429,23.7719429 C16.9471429,25.5297143 ' +
                        '17.5889143,26.1714858 19.3746286,26.1714858 Z ' +
                        'M36.0319429,26.1714858 L40.6636572,26.1714858 ' +
                        'C42.4214858,26.1714858 43.0632001,25.5297143 ' +
                        '43.0632001,23.7719429 L43.0632001,19.1402286 ' +
                        'C43.0632001,17.3824 42.4214858,16.7406857 ' +
                        '40.6636572,16.7406857 L36.0319429,16.7406857 ' +
                        'C34.2741715,16.7406857 33.6324001,17.3824 ' +
                        '33.6324001,19.1402286 L33.6324001,23.7719429 ' +
                        'C33.6324001,25.5297143 34.2741715,26.1714858 ' +
                        '36.0319429,26.1714858 Z M52.7170287,26.1714858 ' +
                        'L57.3210287,26.1714858 C59.106743,26.1714858 ' +
                        '59.7484572,25.5297143 59.7484572,23.7719429 ' +
                        'L59.7484572,19.1402286 C59.7484572,17.3824 ' +
                        '59.106743,16.7406857 57.3210287,16.7406857 ' +
                        'L52.7170287,16.7406857 C50.9313144,16.7406857 ' +
                        '50.2896001,17.3824 50.2896001,19.1402286 ' +
                        'L50.2896001,23.7719429 C50.2896001,25.5297143 ' +
                        '50.9313144,26.1714858 52.7170287,26.1714858 Z ' +
                        'M2.68931429,42.8567372 L7.32102858,42.8567372 ' +
                        'C9.10674287,42.8567372 9.74845716,42.2150001 ' +
                        '9.74845716,40.4292858 L9.74845716,35.8254858 ' +
                        'C9.74845716,34.0397715 9.10674287,33.3980572 ' +
                        '7.32102858,33.3980572 L2.68931429,33.3980572 ' +
                        'C0.931542859,33.3980572 0.289771429,34.0397715 ' +
                        '0.289771429,35.8254858 L0.289771429,40.4292858 ' +
                        'C0.289771429,42.2150001 0.931542859,42.8567372 ' +
                        '2.68931429,42.8567372 Z M19.3746286,42.8567372 ' +
                        'L24.0062858,42.8567372 C25.7641143,42.8567372 ' +
                        '26.4058286,42.2150001 26.4058286,40.4292858 ' +
                        'L26.4058286,35.8254858 C26.4058286,34.0397715 ' +
                        '25.7641143,33.3980572 24.0062858,33.3980572 ' +
                        'L19.3746286,33.3980572 C17.5889143,33.3980572 ' +
                        '16.9471429,34.0397715 16.9471429,35.8254858 ' +
                        'L16.9471429,40.4292858 C16.9471429,42.2150001 ' +
                        '17.5889143,42.8567372 19.3746286,42.8567372 Z ' +
                        'M36.0319429,42.8567372 L40.6636572,42.8567372 ' +
                        'C42.4214858,42.8567372 43.0632001,42.2150001 ' +
                        '43.0632001,40.4292858 L43.0632001,35.8254858 ' +
                        'C43.0632001,34.0397715 42.4214858,33.3980572 ' +
                        '40.6636572,33.3980572 L36.0319429,33.3980572 ' +
                        'C34.2741715,33.3980572 33.6324001,34.0397715 ' +
                        '33.6324001,35.8254858 L33.6324001,40.4292858 ' +
                        'C33.6324001,42.2150001 34.2741715,42.8567372 ' +
                        '36.0319429,42.8567372 Z M52.7170287,42.8567372 ' +
                        'L57.3210287,42.8567372 C59.106743,42.8567372 ' +
                        '59.7484572,42.2150001 59.7484572,40.4292858 ' +
                        'L59.7484572,35.8254858 C59.7484572,34.0397715 ' +
                        '59.106743,33.3980572 57.3210287,33.3980572 ' +
                        'L52.7170287,33.3980572 C50.9313144,33.3980572 ' +
                        '50.2896001,34.0397715 50.2896001,35.8254858 ' +
                        'L50.2896001,40.4292858 C50.2896001,42.2150001 ' +
                        '50.9313144,42.8567372 52.7170287,42.8567372 Z'
                    }
                    transform="translate(2 10.571)"
                  >
                  </path>
                </svg>
              </Button>
              <Button
                onClick={(event) => {
                  viewModel.handleModalOpen(event, 3)
                }}
                isOpen={viewModel.radioMode === 3}
              >
                {
                  (urls && urls.length > 0)
                    ? (
                      <UIImage
                        urls={urls}
                        className="size-7 rounded-full group-active:opacity-60"
                      />
                    )
                    : (
                      <svg
                        className="fill-current"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 64 64"
                        width="28"
                        height="28"
                      >
                        <path
                          d={
                            'M29.9475268,59.5867724 C46.1333288,59.5867724 ' +
                              '59.534715,46.15661 59.534715,29.9998218 ' +
                              'C59.534715,13.8140198 46.1043387,0.412871288 ' +
                              '29.9185367,0.412871288 C13.7617248,' +
                              '0.412871288 ' +
                              '0.36059406,13.8140198 0.36059406,29.9998218 ' +
                              'C0.36059406,46.15661 13.7907743,59.5867724 ' +
                              '29.9475268,59.5867724 Z M29.9475268,' +
                              '39.8621585 ' +
                              'C21.2165169,39.8621585 14.5159426,42.9948714 ' +
                              '11.5572297,46.4756852 C7.67029902,42.0956436 ' +
                              '5.32073466,36.3523367 5.32073466,29.9998218 ' +
                              'C5.32073466,16.3085941 16.2273089,5.34403961 ' +
                              '29.9185367,5.34403961 C43.6097644,5.34403961 ' +
                              '54.5743189,16.3085941 54.6039513,29.9998218 ' +
                              'C54.6325367,36.3523367 52.253804,42.1246337 ' +
                              '48.3378832,46.4756852 C45.4081605,42.9948714 ' +
                              '38.6785961,39.8621585 29.9475268,39.8621585 Z ' +
                              'M29.9475268,34.9309902 C35.5458832,34.9889704 ' +
                              '39.8968931,30.2318614 39.8968931,23.9954258 ' +
                              'C39.8968931,18.1360396 35.5168337,13.291901 ' +
                              '29.9475268,13.291901 C24.3782198,13.291901 ' +
                              '19.9691703,18.1360396 19.9979358,23.9954258 ' +
                              'C20.0272099,30.2318614 24.3782198,34.8729506 ' +
                              '29.9475268,34.9309902 Z'
                          }
                          transform="translate(2 2)"
                        >
                        </path>
                      </svg>
                    )
                }
              </Button>
            </div>
          )
        }
      </header>

      {
        viewModel.radioMode === 1 && (
          <NoticePopover
            onClose={() => viewModel.handleModalClose()}
            right={viewModel.modalRight}
          >
            <div
              className="pt-1.25 min-w-15.75 md:min-w-19.75 flex justify-center"
            >
              <svg
                viewBox="0 0 100.34765625 106.2001953125"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                className="w-5.75 md:w-7.25 fill-systemBlue"
                aria-hidden="true"
                width="29"
                height="31"
              >
                <g transform="matrix(1 0 0 1 -12.451142578124973 88.330078125)">
                  <path
                    d={
                      'M31.8359-82.0312L93.457-82.0312C93.1641-86.1816 ' +
                        '90.8203-88.3301 86.2793-88.3301L38.9648-88.3301C34.' +
                        '4727-88.3301 32.1289-86.1816 31.8359-82.0312ZM21.' +
                        '7773-68.5059L103.516-68.5059C102.783-72.9492 100.' +
                        '684-75.3906 95.8008-75.3906L29.4922-75.3906C24.' +
                        '6094-75.3906 22.5098-72.9492 ' +
                        '21.7773-68.5059ZM27.2949 ' +
                        '17.8223L97.9492 17.8223C107.764 17.8223 112.793 ' +
                        '12.8418 112.793 ' +
                        '3.125L112.793-45.9961C112.793-55.7129 ' +
                        '107.764-60.6445 97.9492-60.6445L27.2949-60.6445C17.' +
                        '3828-60.6445 12.4512-55.7129 ' +
                        '12.4512-45.9961L12.4512 ' +
                        '3.125C12.4512 12.8418 17.3828 17.8223 27.2949 ' +
                        '17.8223ZM44.4824-1.51367L44.4824-21.5332C44.4824-25.' +
                        '0977 45.9473-26.8555 ' +
                        '48.877-27.0508L48.877-32.959C48.' +
                        '877-42.2363 54.4434-48.4863 62.6465-48.4863C70.8496-' +
                        '48.4863 76.416-42.2363 76.416-32.959L76.416-27.' +
                        '0508C79.3457-26.8555 80.8105-25.0977 80.8105-21.' +
                        '5332L80.8105-1.51367C80.8105 2.24609 ' +
                        '79.1504 4.00391 ' +
                        '75.6836 4.00391L49.6094 4.00391C46.1426 4.00391 ' +
                        '44.4824 2.24609 44.4824-1.51367ZM54.1504-27.0996L71.' +
                        '1426-27.0996L71.1426-33.5449C71.1426-39.4531 ' +
                        '67.7246-43.4082 62.6465-43.4082C57.5684-43.4082 ' +
                        '54.1504-39.4531 54.1504-33.5449Z'
                    }
                  />
                </g>
              </svg>
            </div>
            <div>
              <p
                className={
                  'text-base font-semibold leading-5.25 text-labelPrimary'
                }
              >
                {
                  Localizer.default().localize(
                    'Advanced Data Protection is On.'
                  )
                }
              </p>
              <p className="text-base leading-5.25">
                <span
                  dangerouslySetInnerHTML={{
                    __html: Localizer
                      .default()
                      .localize(
                        '*X* doesn\'t have access to display some of your ' +
                          'data, including photos, videos, songs and files. ' +
                          'Select an app to allow access using your master ' +
                          'password.'
                      )
                      .replace('*X*', process.env.NEXT_PUBLIC_TITLE ?? '')
                  }}
                />
              </p>
            </div>
          </NoticePopover>
        )
      }
      {
        viewModel.radioMode === 2 && (
          <Popover
            onClose={() => viewModel.handleModalClose()}
            right={viewModel.modalRight}
          >
            <div className="p-1.25">
              <p className="px-2.5 pt-2.5 md:pb-1.25 text-sm font-semibold">
                {'Apps'}
              </p>
              <div className="w-full md:w-78 grid grid-cols-4">
                {
                  apps?.map((app, index) => (
                    <Link
                      key={index}
                      href={app.href}
                      className={
                        'flex flex-col items-center w-19.5 h-26.25 p-3 ' +
                          'hover:bg-fillTertiary rounded-[10px] ' +
                          'dark:active:bg-[rgba(0,153,255,.16)] ' +
                          'active:bg-[rgba(0,113,227,.16)] group'
                      }
                    >
                      <UIImage
                        className="size-13.5 mb-1.25 group-active:opacity-60"
                        urls={app.urls}
                      />
                      <span
                        className={
                          'mt-1.5 text-labelSecondary text-xs leading-4 ' +
                            'group-active:text-labelQuaternary'
                        }
                      >
                        {app.name}
                      </span>
                    </Link>
                  ))
                }
              </div>
              <hr className="m-1.25 border-gray5" />
              <MenuItem
                text={Localizer.default().localize('Customize Home Page')}
                onClick={() => viewModel.handleOnCustomize()}
              >
                <svg
                  viewBox="0 0 268.0201416015625 158.116943359375"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  className={
                    'h-5.5 -mx-2.5 -my-[2.5px] fill-systemBlue ' +
                      'group-active:opacity-60'
                  }
                  aria-hidden="true"
                >
                  <g
                    transform={
                      'matrix(1 0 0 1 72.1201049804688 114.2884521484375)'
                    }
                  >
                    <path
                      d={
                        'M49.3652-60.9863C49.9512-60.9863 50.2441-61.3281 ' +
                          '50.3418-61.8652C52.002-69.6777 51.9043-69.9707 ' +
                          '60.1074-71.6309C60.6445-71.7285 61.0352-72.0703 ' +
                          '61.0352-72.6074C61.0352-73.1934 60.6445-73.5352 ' +
                          '60.1074-73.6328C51.9043-75.293 52.002-75.5859 ' +
                          '50.3418-83.3496C50.2441-83.8867 49.9512-84.2773 ' +
                          '49.3652-84.2773C48.7793-84.2773 48.4863-83.8867 ' +
                          '48.3887-83.3496C46.7285-75.5859 46.8262-75.293 ' +
                          '38.623-73.6328C38.0859-73.5352 37.6953-73.1934 ' +
                          '37.6953-72.6074C37.6953-72.0703 38.0859-71.7285 ' +
                          '38.623-71.6309C46.8262-69.9707 46.7285-69.6777 ' +
                          '48.3887-61.8652C48.4863-61.3281 48.7793-60.9863 ' +
                          '49.3652-60.9863ZM89.6973-43.75C90.3809-43.75 ' +
                          '90.7715-44.1895 90.918-44.8242C92.5781-54.1016 ' +
                          '92.627-54.6875 102.441-56.3965C103.125-56.4941 ' +
                          '103.564-56.9336 103.564-57.6172C103.564-58.3008 ' +
                          '103.125-58.6914 102.441-58.8379C92.627-60.498 ' +
                          '92.5781-61.084 90.918-70.3613C90.7715-70.9961 ' +
                          '90.3809-71.4844 89.6973-71.4844C89.0137-71.4844 ' +
                          '88.623-70.9961 88.4766-70.3613C86.8164-61.084 ' +
                          '86.7676-60.498 76.9531-58.8379C76.3184-58.6914 ' +
                          '75.8301-58.3008 75.8301-57.6172C75.8301-56.9336 ' +
                          '76.3184-56.4941 76.9531-56.3965C86.7676-54.6875 ' +
                          '86.8164-54.1016 88.4766-44.8242C88.623-44.1895 ' +
                          '89.0137-43.75 ' +
                          '89.6973-43.75ZM22.6074-29.7363C23.291-29.7363 ' +
                          '23.6816-30.2246 23.8281-30.8594C25.4883-40.1367 ' +
                          '25.5371-40.7227 35.3516-42.3828C35.9863-42.5293 ' +
                          '36.4746-42.9199 36.4746-43.6035C36.4746-44.2871 ' +
                          '35.9863-44.7266 35.3516-44.8242C25.5371-46.5332 ' +
                          '25.4883-47.1191 23.8281-56.3965C23.6816-57.0312 ' +
                          '23.291-57.4707 22.6074-57.4707C21.9238-57.4707 ' +
                          '21.5332-57.0312 21.3867-56.3965C19.7266-47.1191 ' +
                          '19.6777-46.5332 9.86328-44.8242C9.22852-44.7266 ' +
                          '8.74023-44.2871 8.74023-43.6035C8.74023-42.9199 ' +
                          '9.22852-42.5293 9.86328-42.3828C19.6777-40.7227 ' +
                          '19.7266-40.1367 21.3867-30.8594C21.5332-30.2246 ' +
                          '21.9238-29.7363 22.6074-29.7363ZM106.006 ' +
                          '12.0117C108.057 14.1113 111.572 14.1113 113.525 ' +
                          '12.0117C115.527 9.86328 115.527 6.54297 113.525 ' +
                          '4.49219L67.0898-42.0898C65.0391-44.1406 ' +
                          '61.5234-44.1406 59.5703-42.0898C57.5195-39.9414 ' +
                          '57.5684-36.5723 ' +
                          '59.5703-34.5215ZM77.5879-21.5332L63.2812-35.' +
                          '8887C62.4023-36.7676 62.1094-37.7441 ' +
                          '62.9883-38.5742C63.7207-39.3555 64.7461-39.1602 ' +
                          '65.6738-38.2324L80.0293-23.877ZM45.8008 ' +
                          '12.793C46.6797 12.793 47.3145 12.1582 47.4609 ' +
                          '11.2305C49.0234-1.80664 49.6582-2.14844 ' +
                          '62.9395-4.29688C63.9648-4.49219 64.5996-4.98047 ' +
                          '64.5996-5.95703C64.5996-6.88477 63.9648-7.4707 ' +
                          '63.1348-7.61719C49.7559-10.1562 49.0234-10.1074 ' +
                          '47.4609-23.1445C47.3145-24.0723 46.6797-24.707 ' +
                          '45.8008-24.707C44.873-24.707 44.2383-24.0723 ' +
                          '44.1406-23.1934C42.4316-9.96094 41.9922-9.52148 ' +
                          '28.4668-7.61719C27.6367-7.51953 27.002-6.88477 ' +
                          '27.002-5.95703C27.002-5.0293 27.6367-4.49219 ' +
                          '28.4668-4.29688C41.9922-1.70898 42.3828-1.70898 ' +
                          '44.1406 11.3281C44.2383 12.1582 44.873 12.793 ' +
                          '45.8008 12.793Z'
                      }
                    />
                  </g>
                </svg>
              </MenuItem>
            </div>
          </Popover>
        )
      }
      {
        viewModel.radioMode === 3 && (
          <Popover
            onClose={() => viewModel.handleModalClose()}
            right={viewModel.modalRight}
          >
            <div className="md:p-1.25 md:w-60">
              <div
                className={
                  'select-none mt-2.5 md:px-2.5 md:py-3.25 ' +
                    'md:bg-fillTertiary md:-mx-1.25 md:-mt-1.25 ' +
                    'md:rounded-t-[10px]'
                }
              >
                <p
                  className={
                    'text-labelPrimary text-base font-semibold leading-6.25 ' +
                      'mx-2.75 md:mx-1.5'
                  }
                >
                  {
                    Localizer.default().nameOrder() === 'firstNameLastName'
                      ? `${firstName} ${lastName}`
                      : `${lastName} ${firstName}`
                  }
                </p>
                <p
                  className={
                    'text-labelSecondary text-sm leading-5 mx-2.75 mb-3.25 ' +
                      'md:mb-0 md:mx-1.5'
                  }
                >
                  {username}
                </p>
              </div>
              <hr
                className="m-1.25 md:-mx-1.25 md:my-0 md:mb-1.25 border-gray4"
              />
              <MenuItem
                text={Localizer.default().localize('Settings')}
              >
                <svg
                  viewBox="0 0 268.0201416015625 158.116943359375"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  className={
                    'h-5.5 -mx-2.5 -my-[2.5px] fill-systemBlue ' +
                      'group-active:opacity-60'
                  }
                  aria-hidden="true"
                >
                  <g
                    transform={
                      'matrix(1 0 0 1 70.28510009765614 114.2884521484375)'
                    }
                  >
                    <path
                      d={
                        'M63.7207 12.5488C64.9902 12.5488 66.2109 12.4023 ' +
                          '67.5293 12.3047L70.3125 17.6758C70.8496 18.75 ' +
                          '71.9238 19.3359 73.291 19.1406C74.5117 18.8965 ' +
                          '75.3418 18.0176 75.5371 16.6992L76.3672 ' +
                          '10.791C78.8086 10.1562 81.2012 9.22852 83.4961 ' +
                          '8.20312L87.8906 12.1582C88.8184 13.0371 89.9902 ' +
                          '13.2324 91.2109 12.5488C92.2852 11.9629 92.7246 ' +
                          '10.791 92.4805 9.52148L91.2598 3.66211C93.3105 ' +
                          '2.24609 95.3125 0.634766 97.1191-1.17188L102.539 ' +
                          '1.12305C103.76 1.61133 104.932 1.36719 105.859 ' +
                          '0.244141C106.689-0.634766 106.787-1.9043 ' +
                          '106.055-2.97852L102.881-8.05664C104.346-10.1074 ' +
                          '105.518-12.3047 ' +
                          '106.641-14.6484L112.646-14.3555C113.916-14.3066 ' +
                          '114.941-14.9902 115.381-16.2109C115.771-17.4316 ' +
                          '115.43-18.6035 ' +
                          '114.404-19.3848L109.717-23.0957C110.352-25.4395 ' +
                          '110.84-27.9785 111.084-30.6152L116.699-32.' +
                          '373C117.969-32.8125 118.701-33.7402 118.701-' +
                          '35.0586C118.701-36.3281 117.969-37.2559 116.699-' +
                          '37.6953L111.084-39.502C110.84-42.1387 ' +
                          '110.352-44.5801 ' +
                          '109.717-46.9727L114.404-50.7324C115.381-51.4648 ' +
                          '115.771-52.5879 115.381-53.8086C114.941-55.0293 ' +
                          '113.916-55.7129 112.646-55.6641L106.641-55.4199C' +
                          '105.518-57.7637 104.346-59.9609 ' +
                          '102.881-62.0117L106.055-67.0898C106.738-68.1152 ' +
                          '106.641-69.3848 105.859-70.2637C104.932-71.3867 ' +
                          '103.76-71.6797 ' +
                          '102.539-71.1426L97.1191-68.9453C95.3125-70.6543 ' +
                          '93.3105-72.3145 ' +
                          '91.2598-73.7305L92.4805-79.541C92.7246-80.8594 ' +
                          '92.2852-82.0312 91.2109-82.6172C89.9902-83.252 ' +
                          '88.8184-83.1543 87.8906-82.1777L83.4961-78.3203' +
                          'C81.2012-79.3457 78.8086-80.1758 ' +
                          '76.3672-80.8594L75.5371-86.7676C75.3418-88.0371 ' +
                          '74.4629-88.9648 73.2422-89.1602C71.9238-89.3555 ' +
                          '70.8496-88.8184 ' +
                          '70.3125-87.7441L67.5293-82.373C66.2109-82.4707 ' +
                          '64.9902-82.5684 63.7207-82.5684C62.4023-82.5684 ' +
                          '61.2305-82.4707 ' +
                          '59.9121-82.373L57.0801-87.7441C56.543-88.8184 ' +
                          '55.4688-89.3555 54.1504-89.1602C52.9297-88.9648 ' +
                          '52.0508-88.0371 ' +
                          '51.9043-86.7676L51.0254-80.9082C48.584-80.1758 ' +
                          '46.2402-79.3457 ' +
                          '43.8965-78.3203L39.502-82.1777C38.5742-83.1543 ' +
                          '37.4023-83.252 36.1816-82.6172C35.1074-82.0312 ' +
                          '34.668-80.8594 ' +
                          '34.9121-79.541L36.1328-73.7305C34.1309-72.3145 ' +
                          '32.0801-70.6543 ' +
                          '30.2734-68.9453L24.8535-71.1426C23.6328-71.6797 ' +
                          '22.5098-71.3867 21.582-70.2637C20.752-69.3848 ' +
                          '20.6543-68.1152 ' +
                          '21.3379-67.1387L24.5117-62.0117C23.0957-59.9609 ' +
                          '21.875-57.7637 ' +
                          '20.752-55.4199L14.7949-55.6641C13.5254-55.7129 ' +
                          '12.4512-55.0293 12.0117-53.8086C11.6211-52.5879 ' +
                          '11.9629-51.4648 ' +
                          '12.9883-50.7324L17.6758-46.9727C17.041-44.5801 ' +
                          '16.5527-42.1387 ' +
                          '16.4062-39.502L10.6934-37.6953C9.42383-37.3047 ' +
                          '8.74023-36.377 8.74023-35.0586C8.74023-33.7402 ' +
                          '9.42383-32.8125 ' +
                          '10.6934-32.373L16.4062-30.5664C16.5527-27.9785 ' +
                          '17.041-25.4395 ' +
                          '17.6758-23.0957L12.9883-19.3848C12.0117-18.6035 ' +
                          '11.6699-17.4316 12.0117-16.2109C12.4512-14.9902 ' +
                          '13.5254-14.3066 ' +
                          '14.7949-14.3555L20.752-14.6484C21.875-12.3047 ' +
                          '23.0957-10.1074 ' +
                          '24.5117-8.05664L21.3379-2.97852C20.6543-1.9043 ' +
                          '20.752-0.634766 21.582 0.244141C22.5098 1.36719 ' +
                          '23.6328 1.61133 24.8535 ' +
                          '1.12305L30.2734-1.17188C32.0801 0.634766 34.1309 ' +
                          '2.24609 36.1328 3.66211L34.9121 9.52148C34.668 ' +
                          '10.791 35.1074 11.9629 36.1816 12.5488C37.4023 ' +
                          '13.2324 38.5742 13.0371 39.502 12.1582L43.8965 ' +
                          '8.20312C46.2402 9.22852 48.584 10.1562 51.0254 ' +
                          '10.791L51.9043 16.6992C52.0508 18.0176 52.9297 ' +
                          '18.8965 54.1504 19.1406C55.4688 19.3359 56.543 ' +
                          '18.75 57.0801 17.6758L59.9121 12.3047C61.1816 ' +
                          '12.4023 62.4023 12.5488 63.7207 ' +
                          '12.5488ZM75.9766-38.1348C73.7305-44.2871 ' +
                          '69.1895-47.6562 63.623-47.6562C62.7441-47.6562 ' +
                          '61.8164-47.5586 ' +
                          '60.2051-47.2168L46.1914-71.1426C51.4648-73.7305 ' +
                          '57.373-75.1465 63.7207-75.1465C85.0098-75.1465 ' +
                          '101.709-58.9844 ' +
                          '103.271-38.1348ZM24.0723-35.0098C24.0723-48.584 ' +
                          '30.5176-60.5469 ' +
                          '40.5762-67.7734L54.7363-43.7012C52.0508-40.9668 ' +
                          '50.8301-37.9883 50.8301-34.8145C50.8301-31.7383 ' +
                          '52.002-28.9062 ' +
                          '54.6875-26.0742L40.2832-2.44141C30.3711-9.7168 ' +
                          '24.0723-21.5332 ' +
                          '24.0723-35.0098ZM57.7637-34.8633C57.7637-38.1836 ' +
                          '60.5469-40.7715 63.7207-40.7715C66.9922-40.7715 ' +
                          '69.7266-38.1836 69.7266-34.8633C69.7266-31.5918 ' +
                          '66.9922-28.9062 63.7207-28.9062C60.5469-28.9062 ' +
                          '57.7637-31.5918 57.7637-34.8633ZM63.7207 ' +
                          '5.12695C57.2266 5.12695 51.1719 3.61328 45.8496 ' +
                          '0.976562L60.2051-22.5098C61.7188-22.1191 ' +
                          '62.7441-22.0215 63.623-22.0215C69.2383-22.0215 ' +
                          '73.7793-25.4883 ' +
                          '75.9766-31.7871L103.223-31.7871C101.66-11.0352 ' +
                          '85.0098 5.12695 63.7207 5.12695Z'
                      }
                    />
                  </g>
                </svg>
              </MenuItem>
              <hr className="m-1.25 border-gray5" />
              <MenuItem
                text={Localizer.default().localize('Sign Out')}
                role="destructive"
              >
                <svg
                  viewBox="0 0 268.0201416015625 158.116943359375"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  className={
                    'h-5.5 -mx-2.5 -my-[2.5px] fill-systemRed ' +
                      'group-active:opacity-60'
                  }
                  aria-hidden="true"
                >
                  <g
                    transform={
                      'matrix(1 0 0 1 75.46503906249995 114.2884521484375)'
                    }
                  >
                    <path
                      d={
                        'M58.5449 14.5508C85.791 14.5508 108.35-8.05664 ' +
                          '108.35-35.2539C108.35-62.5 85.7422-85.0586 ' +
                          '58.4961-85.0586C31.2988-85.0586 8.74023-62.5 ' +
                          '8.74023-35.2539C8.74023-8.05664 31.3477 14.5508 ' +
                          '58.5449 14.5508ZM58.5449 6.25C35.498 6.25 ' +
                          '17.0898-12.207 17.0898-35.2539C17.0898-58.3008 ' +
                          '35.4492-76.7578 58.4961-76.7578C81.543-76.7578 ' +
                          '100-58.3008 100.049-35.2539C100.098-12.207 ' +
                          '81.5918 6.25 58.5449 ' +
                          '6.25ZM41.8457-14.5996C42.9688-14.5996 ' +
                          '43.9453-15.0391 ' +
                          '44.6777-15.8203L58.4961-29.6875L72.4121-15.8203' +
                          'C73.1445-15.0879 74.0723-14.5996 ' +
                          '75.1953-14.5996C77.3438-14.5996 79.1016-16.3574 ' +
                          '79.1016-18.5547C79.1016-19.6777 78.7109-20.5566 ' +
                          '77.9297-21.3379L64.0625-35.2051L77.9785-49.1699C' +
                          '78.8086-50 79.1504-50.8301 ' +
                          '79.1504-51.9043C79.1504-54.0527 77.3926-55.8105 ' +
                          '75.2441-55.8105C74.2188-55.8105 73.3887-55.4199 ' +
                          '72.5586-54.5898L58.4961-40.6738L44.5801-54.541C4' +
                          '3.8477-55.3223 42.9688-55.7129 ' +
                          '41.8457-55.7129C39.6973-55.7129 37.9395-54.0039 ' +
                          '37.9395-51.8555C37.9395-50.7812 38.3789-49.8535 ' +
                          '39.1113-49.1211L52.9785-35.2051L39.1113-21.2891C' +
                          '38.3789-20.5566 37.9395-19.6289 ' +
                          '37.9395-18.5547C37.9395-16.3574 39.6973-14.5996 ' +
                          '41.8457-14.5996Z'
                      }
                    />
                  </g>
                </svg>
              </MenuItem>
            </div>
          </Popover>
        )
      }
    </>
  )
}
